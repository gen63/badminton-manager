# バドミントンゲーム練習管理システム - テスト計画

## 1. テスト方針
本プロジェクトでは、短期間での開発（Phase 0: 2.5日）と実用性を重視し、以下の3段階でテストを実施します。特に配置アルゴリズムの正確性と、スマートフォンでの操作性を重点的に検証します。

---

## 2. テストの段階

### 2.1 ユニットテスト（ロジック検証）
- **対象**: 配置アルゴリズム (`lib/algorithm.ts`)、ユーティリティ関数
- **ツール**: Vitest
- **検証内容**:
  - 待機時間が長い人が正しく優先されるか
  - レーティングに基づくグルーピングが意図通りか
  - 試合数の少ない人が優先的に選ばれるか
  - 同じ組み合わせの重複回避が機能しているか

### 2.2 統合・UIテスト（機能検証）
- **対象**: 各画面（S01〜S05）、状態管理（Zustand Store）
- **ツール**: 手動テスト（Phase 0）、Playwright（将来実装）
- **検証内容**:
  - 画面遷移がスムーズか
  - LocalStorage への保存・読み込みが正しく行われるか
  - スコア入力のバリデーション（21点制、デュース等）が機能するか
  - メンバー入れ替え（タップ交換）が直感的に操作できるか

### 2.3 実地テスト（UX検証）
- **対象**: 実際の練習会での運用
- **環境**: iPhone (Safari / PWA)
- **検証内容**:
  - 試合中の忙しい状況で、管理者が迷わず操作できるか
  - 画面の文字サイズやボタンの押しやすさは適切か
  - 音声通知が周囲の騒音の中でも聞こえるか（またはバイブレーションで気づけるか）

---

## 3. フェーズ別テスト実施内容

### Phase 0: プロトタイプ
- **重点**: アルゴリズムの正確性とUIの基本動作
- **実施**: 
  - Vitest によるアルゴリズムの単体テスト
  - 管理者端末1台でのシミュレーションテスト（ダミーデータによる20試合程度の進行）

### Phase 1: 本番版
- **重点**: 同期精度と権限管理
- **実施**: 
  - 複数端末を用いたリアルタイム同期テスト
  - 権限（管理者/サブ/一般）ごとの操作制限テスト
  - Firebase 接続断時の挙動確認

---

## 4. テストケース例（アルゴリズム）

| ケースID | シナリオ | 期待値 |
|----------|----------|--------|
| T-01 | 全員0試合の状態で配置 | 入室順（またはランダム）で4人が選ばれる |
| T-02 | 1試合終わった直後の人がいる | その人は待機時間が最短のため、次の配置からは外れる |
| T-03 | スコア未入力の人がいる | スコア未入力ペナルティにより、優先順位が下がる |
| T-04 | 3コート運用時 | 上位4人はコート3に配置されない（グルーピング制約） |

---

## 関連ドキュメント

- [02_functional_requirements.md](./02_functional_requirements.md) - 機能要件
- [04_technical_spec.md](./04_technical_spec.md) - 技術仕様
