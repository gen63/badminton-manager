# バドミントン練習管理システム - 最終仕様確定版

## 開発ロードマップ（確定）

### Phase 0: プロトタイプ（2.5日）
```yaml
目的: UI/UX検証、アルゴリズム動作確認
環境: GitHub Pages + LocalStorage
使い方: 管理者端末1台のみで動かす（オフライン運用を想定）
期間: 2.5日
コスト: 無料

実装機能:
  ✅ 全画面（S01〜S05）
  ✅ 配置アルゴリズム
  ✅ ゲーム進行
  ✅ スコア入力
  ✅ 試合ログ
  ✅ 履歴コピー

省略機能（非表示）:
  ❌ 複数デバイス対応
  ❌ URL共有機能
  ❌ 外部連携（スプレッドシートURL設定）
  ❌ 権限管理
  ❌ リアルタイム同期
```

### Phase 1: 本番版（6日）
```yaml
目的: 実用レベルの完成形
環境: Vercel + Firebase Firestore
使い方: 複数デバイス対応
期間: 6日
コスト: 無料（無料枠内）

実装機能:
  ✅ 複数デバイス対応
  ✅ セッション管理（URL共有）
  ✅ 権限管理（3段階）
  ✅ リアルタイム同期
  ✅ FCM通知（オプション）

注: 旧Phase 1（ポーリング版）と Phase 2 を統合
理由: 最初から Firebase で実装する方が効率的
```

---

## 権限管理（3段階）

### 権限表

| 操作 | 管理者 | サブ管理者 | 一般参加者 |
|------|--------|-----------|-----------|
| セッション作成 | ✅ | ❌ | ❌ |
| 参加者管理 | ✅ | ❌ | ❌ |
| サブ管理者指定 | ✅ | ❌ | ❌ |
| 練習リセット | ✅ | ❌ | ❌ |
| 履歴コピー | ✅ | ❌ | ❌ |
| コート数変更 | ✅ | ✅ | ❌ |
| 点数設定変更 | ✅ | ✅ | ❌ |
| コート配置 | ✅ | ✅ | ❌ |
| ゲーム開始・終了 | ✅ | ✅ | ❌ |
| メンバー入れ替え | ✅ | ✅ | ❌ |
| 他人の休憩設定 | ✅ | ✅ | ❌ |
| スコア入力・修正 | ✅ | ✅ | ✅ |
| 自分の休憩設定 | ✅ | ✅ | ✅ |

### 運用ルール
```yaml
管理者:
  - セッション作成者
  - 必ず参加
  - 不参加の場合は別の人に依頼

サブ管理者:
  - 2〜5人を事前指定
  - 配置・進行を手伝う
  - 管理者不在時は対応不可（管理者は必ず参加）

一般参加者:
  - スコア入力と自分の休憩設定のみ
```

---

## 技術スタック

### Phase 0（プロトタイプ）
```yaml
フロントエンド:
  - React 18+ (TypeScript)
  - Vite
  - Tailwind CSS
  - Zustand

データ保存:
  - LocalStorage

デプロイ:
  - GitHub Pages

コスト: 無料
```

### Phase 1（本番版）
```yaml
フロントエンド:
  - React 18+ (TypeScript)
  - Vite
  - Tailwind CSS
  - Zustand
  - React Router v6

バックエンド:
  - Firebase Firestore
  - リアルタイムリスナー
  - Anonymous Auth
  - Cloud Functions（オプション）
  - FCM（オプション）

デプロイ:
  - Vercel（フロント）
  - Firebase（バックエンド）

コスト: 無料（無料枠内）
```

---

## 主要な設計決定

### 1. 同期方式
```
Phase 0: なし（LocalStorage のみ）
Phase 1: リアルタイム同期（Firestore リアルタイムリスナー）

※ ポーリング方式はスキップ（二度手間を避けるため）
```

### 2. データベース
```
Phase 0: なし
Phase 1: Firebase Firestore

※ Supabase はスキップ
```

### 3. 権限管理
```
Phase 0: なし（1人のみなので不要）
Phase 1: 3段階（管理者 / サブ管理者 / 一般参加者）
```

### 4. デプロイ
```
Phase 0: GitHub Pages
Phase 1: Vercel + Firebase
```

---

## 開発スケジュール

```
Phase 0: 2.5日
  ↓
フィードバック・改善: 1日
  ↓
Phase 1: 6日
  ↓
完成: 合計 9.5日（約2週間）
```

---

## 重要な制約・前提

```yaml
運用:
  - 週3回の練習
  - 参加者: 約25人
  - コート数: 1〜3
  - 管理者は必ず参加

データ量（月間）:
  - 読み取り: 約216万レコード
  - 書き込み: 約6,000レコード
  - Firebase 無料枠で十分

費用:
  - 完全無料で運用可能
```

---

## 次のステップ

1. このサマリーを保存
2. Phase 0 の実装開始
3. UI/UX検証
4. Phase 1 の実装
5. 実際の練習会でテスト

---

最終更新: 2026-01-29
