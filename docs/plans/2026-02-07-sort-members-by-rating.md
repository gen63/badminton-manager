# 参加者管理画面のソート順をレーティング昇順に変更

**日付**: 2026-02-07
**ステータス**: 計画中

---

## 背景・課題

設定画面 → 「参加者を管理」で開く PlayerSelect 画面では、メンバーが**追加順**で表示されている。
ユーザーはレーティング（内部データ）昇順で並べたいと要望。

## 現状

- `PlayerSelect.tsx` (109行目): `players.map(...)` で配列そのまま表示
- `Player.rating` はオプショナル（`number | undefined`）
- レーティングは Google Sheets 等からインポート時に設定される
- 現在ソートロジックなし

## 設計方針

### ソートルール

1. **レーティングあり**: `rating` 昇順（低い → 高い）
2. **レーティングなし**: レーティングありの後ろに配置
3. **同一レーティング / レーティングなし同士**: 既存の配列順序を維持（安定ソート）

### 理由

- レーティング昇順 = 弱い順から表示。管理画面でレベル順に一覧を見られる
- レーティングなしを末尾にすることで、未設定メンバーが明確に分かる

## 変更対象

### `src/pages/PlayerSelect.tsx`

- `players` を直接 `.map()` せず、ソート済み配列を作成してから表示
- ソートは表示時のみ（ストアの配列順序は変更しない）

```tsx
// 表示用にレーティング昇順でソート
const sortedPlayers = [...players].sort((a, b) => {
  const aRating = a.rating ?? Infinity;
  const bRating = b.rating ?? Infinity;
  return aRating - bRating;
});
```

- `sortedPlayers.map(...)` で表示

## 影響範囲

- PlayerSelect.tsx のみ
- ストア・アルゴリズム・他ページへの影響なし
- 表示順のみの変更なので副作用なし

## テスト観点

- レーティングありメンバーが昇順に並ぶこと
- レーティングなしメンバーが末尾に表示されること
- メンバーの追加・削除が正常に動作すること
- ビルドが通ること (`npm run build`)
