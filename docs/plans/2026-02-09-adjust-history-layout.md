# スコア入力画面のレイアウト調整

**作成日**: 2026-02-09
**ステータス**: 計画中

---

## 1. 現状の課題

### 1.1 「コートX」表示が不要

**現状** (`ScoreInputPage.tsx` L157):
```tsx
<div className="text-xs text-gray-500 text-center mb-3">コート {match.courtId}</div>
```

コート番号は履歴一覧で見えるため、スコア入力画面では不要。画面の縦スペースを消費している。

### 1.2 チームメンバーの横並びを縦並びにしたい

**現状**: ペアの2人が横に並んでいる。
```
[田中] [佐藤]
      vs
[鈴木] [高橋]
```

**要望**: ペアの2人を**縦並び**にする。
```
[田中]
[佐藤]
   vs
[鈴木]
[高橋]
```

### 1.3 古いiPhoneで「確定」ボタンが画面外

**現状の画面構成（上→下）:**
1. ヘッダー（スコア入力 + 閉じるボタン）: ~68px
2. 対戦カード: ~250px（コート番号 + 交換メッセージ + チームA横並び + vs + チームB横並び）
3. スコア表示: ~80px
4. 点数ボタングリッド（0〜30、6列 × 6行）: ~368px
5. アクションボタン（クリア + 確定）: ~64px
6. spacing（space-y-4 × 4）: ~64px
7. **合計: ~894px** → iPhone SE/8（667px）では **~227pxスクロール必要**

さらにメンバーを縦並びにすると +88px 必要になるため、他で大幅な縦スペース削減が必要。

---

## 2. 改善方針

### 2.1 コート番号表示を削除

```diff
- <div className="text-xs text-gray-500 text-center mb-3">コート {match.courtId}</div>
```

**節約: ~24px**

### 2.2 チームメンバーを縦並びに変更

**Before:**
```tsx
<div className="flex gap-2">
  {match.teamA.map((playerId, idx) => (
    <button className="flex-1 min-h-[44px] ...">
      {getPlayerName(playerId)}
    </button>
  ))}
</div>
```

**After:**
```tsx
<div className="space-y-1.5">
  {match.teamA.map((playerId, idx) => (
    <button className="w-full min-h-[40px] ...">
      {getPlayerName(playerId)}
    </button>
  ))}
</div>
```

- `flex gap-2`（横並び）→ `space-y-1.5`（縦並び）
- `flex-1` → `w-full`
- ボタンの `min-h` を `44px` → `40px` に
- **追加高さ: ~46px/チーム × 2 = ~92px**（元44px → 40+6+40=86px）

### 2.3 全体の縦スペースを大幅圧縮

縦並び化による増加分を含め、合計で **~320px以上** の削減が必要。

#### 施策A: 対戦カードのコンパクト化
- コート番号削除: **-24px**
- 交換メッセージを非選択時は完全非表示にする（`invisible` → 条件付きレンダリング）: **-44px**
- 対戦カードのパディング `p-5` → `p-3`: **-16px**
- チーム背景の `p-3` → `p-2`: **-8px × 2 = -16px**
- チーム間 `space-y-3` → `space-y-2`: **-4px**

#### 施策B: 点数ボタングリッドのコンパクト化
- ボタン `min-h-[48px]` → `min-h-[36px]`: **-72px**（12px × 6行）
- `gap-2` → `gap-1`: **-5px**
- パディング `p-5` → `p-3`: **-16px**

#### 施策C: スコア表示のコンパクト化
- パディング `p-6` → `p-3`: **-24px**

#### 施策D: 全体スペーシング
- `space-y-4` → `space-y-2`: **-8px × 4 = -32px**

#### 施策E: ヘッダーのコンパクト化
- パディング `p-4` → `p-2`: **-16px**

**合計削減: ~269px**
**縦並び追加: +48px**（元44px→86px, 差42px × 2チーム = +84px... いや、元は1行44px、新は40+6+40=86px、差42px × 2 = +84px）

**修正後合計: 894 + 84 - 269 ≒ 709px**

まだ667pxより42px超過する可能性があるため、**アクションボタンを画面下部に固定配置**する。

#### 施策F: アクションボタンを画面下部に固定

```tsx
{/* アクションボタン - 固定 */}
<div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-3 pb-safe">
  <div className="max-w-2xl mx-auto grid grid-cols-2 gap-3">
    <button className="btn-secondary ...">クリア</button>
    <button className="btn-primary ...">確定</button>
  </div>
</div>
```

これにより「確定」ボタンは常に画面下部に表示され、どの画面サイズでもスクロール不要になる。
メインコンテンツには固定ボタン分の `pb-20` を追加して重なりを防ぐ。

---

## 3. 対象ファイル

| ファイル | 変更内容 |
|---------|---------|
| `src/pages/ScoreInputPage.tsx` | コート番号削除、メンバー縦並び、スペース圧縮、確定ボタン固定化 |

---

## 4. 実装ステップ

1. **コート番号表示を削除**
2. **メンバーを縦並びに変更**（`flex gap-2` → `space-y-1.5`）
3. **交換メッセージを条件付きレンダリングに変更**
4. **各セクションのパディング・スペーシングを圧縮**
5. **点数ボタンのサイズを縮小**
6. **アクションボタンを画面下部に固定配置**
7. **ビルド確認**: `npm run build`

---

## 5. 考慮事項

### 5.1 点数ボタンのタップターゲット

ボタンを `36px` に縮小するため、DESIGN.mdの44px基準を下回る。
ただし6列グリッドなので各ボタンの**幅**は約50pxあり、指で十分にタップ可能。
また隣接ボタンをタップしても1点しかずれないため、誤タップの影響は小さい。

### 5.2 固定ボタンと点数グリッドの重なり

`fixed bottom-0` のアクションボタンが点数グリッドの下部を隠す可能性がある。
`pb-20`（80px）のパディングを追加して重なりを防ぐ。

### 5.3 メンバー交換UIの使いやすさ

縦並びにすると、プレイヤーボタンが全幅になりタップしやすくなる（横並びの半分幅より改善）。
交換操作フローには影響なし。
