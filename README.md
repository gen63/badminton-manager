# 🏸 バドミントン練習管理システム

**Phase 0 - プロトタイプ版**

週3回のバドミントン練習で、約25人の参加者を1〜3面のコートに効率的に配置・管理するWebアプリケーションです。

## 🚀 デモ

**https://gen63.github.io/badminton-manager/**

## ✨ 主な機能

### Phase 0（現在のバージョン）

- ✅ **セッション作成** - コート数、点数、練習日を設定
- ✅ **参加者管理**
  - 複数行一括入力対応（改行区切り）
  - プレイヤーの追加・削除
  - 休憩設定
- ✅ **自動配置機能**
  - 全コート一括配置
  - コートごとの個別配置
  - プレイ回数、ペア履歴、対戦履歴を考慮した最適配置
- ✅ **メンバー交換機能** - コート内と待機中のプレイヤーを交換
- ✅ **コート数調整** - メイン画面から +/- ボタンで調整可能（1〜3）
- ✅ **ゲーム進行管理**
  - 試合開始・スコア入力・試合終了
  - リアルタイムタイマー表示
  - リーチ表示（目標点数到達時）
- ✅ **試合ログ表示** - メイン画面に最新5件を表示
- ✅ **試合履歴・統計** - 全試合ログ、個人成績（勝敗、得点）
- ✅ **履歴コピー** - 試合結果をクリップボードにコピー
- ✅ **Toast通知** - 操作フィードバックを視覚的に表示
- ✅ **ボタンフィードバック** - タップ時の視覚的フィードバック（拡大・縮小・枠線）
- ✅ **LocalStorage保存** - ブラウザ内でデータ永続化

### 配置アルゴリズムの特徴

優先順位に基づいて自動配置：

1. **プレイ回数の均等化** - プレイ回数が少ない人を優先
2. **待ち時間の最小化** - 最後にプレイしてから時間が経っている人を優先
3. **ペアの多様性** - 同じペアの組み合わせを避ける
4. **対戦相手の多様性** - 同じ対戦相手を避ける

## 🛠️ 技術スタック

- **フロントエンド**
  - React 18 + TypeScript
  - Vite（ビルドツール）
  - Tailwind CSS（スタイリング）
  - Zustand（状態管理）
  - React Router v6（ルーティング）

- **データ保存**
  - LocalStorage（Phase 0）
  - Firebase Firestore（Phase 1予定）

- **デプロイ**
  - GitHub Pages

## 📦 開発環境のセットアップ

### 必要なもの

- Node.js 18以上
- npm

### インストール

```bash
# リポジトリをクローン
git clone https://github.com/gen63/badminton-manager.git
cd badminton-manager

# 依存パッケージをインストール
npm install

# 開発サーバーを起動
npm run dev
```

開発サーバーが起動したら、ブラウザで `http://localhost:5173/badminton-manager/` にアクセス。

### ビルド

```bash
# 本番用ビルド
npm run build

# ビルドしたファイルをプレビュー
npm run preview
```

### デプロイ

```bash
# GitHub Pagesにデプロイ
npm run deploy
```

## 📱 使い方

### 1. セッション作成

- 練習日を選択
- コート数（1〜3）を設定
- 目標点数（11/15/21）を選択

### 2. 参加者登録

- テキストエリアに名前を入力（1行に1人）
- 改行区切りで複数人を一度に追加可能
- 最低4人以上必要

### 3. メイン画面

- **コート数調整** - +/- ボタンで1〜3の範囲で調整
- **全コート一括配置** - すべてのコートに一度に配置
- **個別配置** - 各コートの「配置」ボタンで個別に配置
- **メンバー交換** - コート内と待機中のプレイヤーを交換
- **ゲーム開始/終了** - 各コートで試合を開始・終了
- **スコア入力** - +/- ボタンで得点を記録
- **タイマー表示** - 試合中の経過時間をリアルタイム表示
- **リーチ表示** - 目標点数到達時に「🎯 リーチ！」を表示
- **試合ログ** - 最新5件の試合結果を表示
- **待機中/休憩中表示** - プレイヤーの状態を一覧表示
- **休憩設定** - コーヒーアイコンで休憩中に設定

### 4. 履歴・統計

- 全試合の詳細ログ
- プレイヤーごとの統計（試合数、勝敗、得点）
- 履歴をクリップボードにコピー

### 5. 設定

- コート数・点数の変更
- セッションのリセット（確認モーダル付き）

## 🗂️ プロジェクト構造

```
badminton-manager/
├── src/
│   ├── components/
│   │   ├── CourtCard.tsx           # コートカード（タイマー付き）
│   │   ├── EmptyState.tsx          # 空状態表示
│   │   ├── LoadingSpinner.tsx      # ローディング表示
│   │   ├── Toast.tsx               # トースト通知
│   │   └── PlayerSwapModal.tsx     # メンバー交換モーダル
│   ├── hooks/
│   │   ├── useToast.ts             # トースト通知フック
│   │   └── useGameTimer.ts         # ゲームタイマーフック
│   ├── lib/
│   │   ├── algorithm.ts            # 配置アルゴリズム
│   │   └── utils.ts                # ユーティリティ関数
│   ├── pages/
│   │   ├── SessionCreate.tsx       # S01: セッション作成
│   │   ├── PlayerSelect.tsx        # S02: 参加者選択（複数行対応）
│   │   ├── MainPage.tsx            # S03: メイン画面
│   │   ├── HistoryPage.tsx         # S04: 履歴・統計
│   │   └── SettingsPage.tsx        # S05: 設定
│   ├── stores/
│   │   ├── sessionStore.ts         # セッション状態管理
│   │   ├── playerStore.ts          # プレイヤー状態管理
│   │   └── gameStore.ts            # ゲーム進行管理
│   └── types/
│       ├── player.ts               # Player型定義
│       ├── court.ts                # Court型定義
│       ├── match.ts                # Match型定義
│       └── session.ts              # Session型定義
├── doc/                            # 仕様書
└── public/
    ├── favicon.svg                 # カスタムアイコン
    └── manifest.json               # PWA設定
```

## 📋 ロードマップ

### Phase 0: プロトタイプ（✅ 完了）
- ✅ 全画面実装
- ✅ 配置アルゴリズム（一括・個別）
- ✅ ゲーム進行（タイマー・リーチ表示）
- ✅ メンバー交換機能
- ✅ 試合ログ表示
- ✅ 試合履歴・統計
- ✅ Toast通知システム
- ✅ ボタンフィードバック
- ✅ コート数動的調整
- ✅ 複数行プレイヤー入力
- ✅ LocalStorage保存
- ✅ GitHub Pagesデプロイ
- ✅ PWA対応（manifest.json）

### Phase 1: 本番版（予定）
- 🔲 Firebase Firestore連携
- 🔲 複数デバイス対応
- 🔲 リアルタイム同期
- 🔲 セッション共有（URL）
- 🔲 権限管理（管理者/サブ管理者/一般参加者）
- 🔲 PWA対応（オフライン動作）
- 🔲 プッシュ通知（FCM）
- 🔲 スプレッドシート連携

## 🤝 貢献

バグ報告や機能提案は、GitHubのIssuesでお願いします。

## 📄 ライセンス

MIT License

## 👤 作成者

Gen (@genzwift)

---

**開発状況**: Phase 0 完了 🎉  
**最終更新**: 2026-01-30
